@using GTRouteApp.Models
@inject NavigationManager NavigationManager

<div class="media-container">
    <div class="header-section">
        <h4><span class="bi bi-card-image"></span> Featured Media</h4>
    </div>
    
    <div class="image-section">
        <div class="image-placeholder">
            <div class="image-shimmer"></div>
            <span class="bi bi-image"></span>
        </div>
        <img src="@Image.ImageUrl" 
            alt="@Image.ImageName">
        <button type="button" 
            title="See Image in Full Screen"
            class="btn btn-secondary full-btn">
            <span class="bi bi-arrows-fullscreen"></span> 
            <span class="full-btn-text" style="margin-left: 6px">See Image in Full Screen</span>
        </button>
        <div class="image-info-section">
            <div class="image-info-part-1">
                <p>@Image.Description</p>
            </div>
            <div class="image-info-part-2">
                <p>
                    <span class="bi bi-camera-fill"></span> by @Image.Author
                </p>
            </div>
        </div>
    </div>

    <div class="track-info-section">
        <div class="track-logo-and-name">
            <img src="@Image.LogoUrl" 
                alt="@Image.TrackName" />
            <div class="track-name">
                <a 
                    class="clickable-text"
                    href="@hrefTrack">
                    @Image.TrackName
                </a>
                <div class="track-country-and-category">
                    <p><span class="fi fi-@Image.Country.code"></span> @Image.Country.name</p>
                    <p>|</p>
                    <p>@Image.Category</p>
                </div>
            </div>
        </div>
        <button type="button" 
            class="btn btn-success"
            @onclick="@(() => AccessTrackDetail(Image.Slug!))">
            View Track Detail
        </button>
    </div>
</div>

@code {
    [Parameter]
    public FeaturedImage Image { get; set; } = new();

    private string hrefTrack = "";

    protected override void OnParametersSet()
    {
        var slug = Image.Slug;
        hrefTrack = $"/browse/detail/{slug}?origin=home";
    }

    private void AccessTrackDetail(string slug)
    {
        NavigationManager.NavigateTo($"/browse/detail/{slug}?origin=home");
    }
}