@using GTRouteApp.Models
@namespace GTRouteApp.Components.Detail
@inject IJSRuntime JS

<div class="grid-container">
    @foreach (var image in LoadedImages
                                .Select((imageData, index) => (imageData, index)))
    {
        <article class="grid-item item-revelation">
            <div class="item-placeholder">
                <span class="bi bi-image-fill"></span>
            </div>
            <img src="@image.imageData.ImageUrl" 
                alt="@image.imageData.ImageName" />
        </article>
    }
    @if (LoadedImages.Count() < TotalNumberOfImages)
    {
        <div class="button-item">
            <button type="button" 
                class="btn btn-primary load-more-btn" 
                @onclick="LoadMoreImages">
                Load More
            </button>
        </div>
    }
</div>

@code {
    [Parameter]
    public List<TrackImage> LoadedImages { get; set; } = new();
    [Parameter]
    public int TotalNumberOfImages { get; set; } = 0;
    [Parameter]
    public EventCallback OnLoadMoreClicked { get; set; }

    private async Task LoadMoreImages()
    {
        await OnLoadMoreClicked.InvokeAsync();
    }
}